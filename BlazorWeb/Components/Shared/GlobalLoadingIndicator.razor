@using BlazorWeb.Services

<MudDialog Open="@isLoading">
    <MudProgressCircular />
</MudDialog>

@code {
    private bool isLoading;

    protected override void OnInitialized()
    {
        // Subscribe to loading events
        LoadingService.OnLoadingChanged += HandleLoadingChange;
    }

    public void Dispose()
    {
        // Unsubscribe from loading events
        LoadingService.OnLoadingChanged -= HandleLoadingChange;
    }

    private void HandleLoadingChange(bool isLoading)
    {
        this.isLoading = isLoading;
    }

    [Inject]
    private LoadingService LoadingService { get; set; }
}