@inherits LayoutComponentBase

<MudThemeProvider Theme="_currentTheme" />
<MudDialogProvider />
<MudSnackbarProvider />

<AuthorizeView>
    <NotAuthorized>
        <MudAppBar Elevation="4" Color="Color.Primary">
            <MudSpacer />
        </MudAppBar>

        <MudContainer MaxWidth="MaxWidth.Small" Class="d-flex align-center" Style="height: 100vh;">
            <MudPaper Elevation="25" Class="pa-8" Style="width: 500px;">
                @Body
            </MudPaper>
        </MudContainer>
    </NotAuthorized>
    <Authorized>
        <MudLayout>
            Authorized
            @*  <MainBody>
            @Body
            </MainBody> *@
        </MudLayout>
    </Authorized>
</AuthorizeView>

@code {

    private MudTheme _currentTheme;

    //Gets context that contains auth state
    [CascadingParameter]
    private HttpContext? HttpContext { get; set; }

    //Injects Nav Man to redirect
    [Inject] private NavigationManager? NavMan { get; set; }


    protected override async Task OnInitializedAsync()
    {

        _currentTheme = BlazorHeroTheme.DefaultTheme;

        // //Check if user is logged in
        // if (HttpContext == null || HttpContext.User.Identity.IsAuthenticated == false && (HttpContext.Request.Path != "/" || HttpContext.Request.Path == "/login"))
        // {
        //     //Redirects if not logged in
        //     NavMan!.NavigateTo("Login", true);
        // }

        // StateHasChanged();

        await Task.CompletedTask;

    }
}
